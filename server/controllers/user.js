"use strict";var Hapi=require("hapi"),User=require("../models/user"),Boom=require("boom");exports.createUser=function(e,o){var r=e.mongo.db.db("vbx_current");User.createUser({data:e.payload,db:r}).then(function(r){console.info("User Created : ",e.payload._id),o(r.result)}).catch(function(e){var r=Boom.badRequest(e);console.info("users controller : ","createUser: Error "+e),o(r)})},exports.deleteUser=function(e,o){var r=e.mongo.db.db("vbx_current");User.deleteUser({data:e.params,db:r}).then(function(r){console.info("User Deleted : ",e.params._id),o(r.result)}).catch(function(e){var r=Boom.badRequest(e);console.info("users controller : ","Delete User: Error "+e),o(r)})},exports.updateUser=function(e,o){var r=e.mongo.db.db("vbx_current");User.updateUser({data:e.payload,db:r,filter:e.params}).then(function(r){console.info("User Updated : ",e.payload._id),o(r.result)}).catch(function(e){var r=Boom.badRequest(e);console.info("users controller : ","updateUser: Error "+e),o(r)})},exports.updatePassword=function(e,o){var r=e.mongo.db.db("vbx_current");User.updatePassword({data:e.payload,db:r,filter:{_id:e.auth.credentials._id}}).then(function(r){console.info("User Updated : ",e.auth.credentials._id),o(r.result)}).catch(function(e){var r=Boom.badRequest(e);console.info("users controller : ","updateUser: Error "+e),o(r)})},exports.login=function(e,o){var r=e.mongo.db.db("vbx_current");User.login({data:e.payload,db:r}).then(function(r){console.info("User login : ",e.payload._id),o(r)}).catch(function(e){var r=void 0;r=401==e.code?Boom.unauthorized("Invalid Credentials"):Boom.badRequest(e),console.info("users controller : ","updateUser: Error "+e),o(r)})};