"use strict";var Hapi=require("hapi"),User=require("../models/user"),Boom=require("boom");exports.createUser=function(o,r){var e=o.mongo.db.db("vbx_current");User.createUser({data:o.payload,db:e}).then(function(e){console.info("User Created : ",o.payload._id),r(e.result)}).catch(function(e){var o=Boom.badRequest(e);console.info("users controller : ","createUser: Error "+e),r(o)})},exports.deleteUser=function(o,r){var e=o.mongo.db.db("vbx_current");User.deleteUser({data:o.params,db:e}).then(function(e){console.info("User Deleted : ",o.params._id),r(e.result)}).catch(function(e){var o=Boom.badRequest(e);console.info("users controller : ","Delete User: Error "+e),r(o)})},exports.updateUser=function(o,r){var e=o.mongo.db.db("vbx_current");User.updateUser({data:o.payload,db:e,filter:o.params}).then(function(e){console.info("User Updated : ",o.payload._id),r(e.result)}).catch(function(e){var o=Boom.badRequest(e);console.info("users controller : ","updateUser: Error "+e),r(o)})},exports.updatePassword=function(o,r){var e=o.mongo.db.db("vbx_current");User.updatePassword({data:o.payload,db:e,filter:{_id:o.auth.credentials._id}}).then(function(e){console.info("User Updated : ",o.auth.credentials._id),r(e.result)}).catch(function(e){var o=Boom.badRequest(e);console.info("users controller : ","updateUser: Error "+e),r(o)})},exports.login=function(o,r){var e=o.mongo.db.db("vbx_current");User.login({data:o.payload,db:e}).then(function(e){console.info("User login : ",o.payload._id),r(e)}).catch(function(e){var o=void 0;o=401==e.code?Boom.unauthorized("Invalid Credentials"):Boom.badRequest(e),console.info("users controller : ","updateUser: Error "+e),r(o)})};